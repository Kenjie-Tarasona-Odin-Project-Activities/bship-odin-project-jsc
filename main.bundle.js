(()=>{"use strict";var e={56:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function i(e){for(var i=-1,r=0;r<t.length;r++)if(t[r].identifier===e){i=r;break}return i}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],d=r.base?l[0]+r.base:l[0],h=s[d]||0,c="".concat(d," ").concat(h);s[d]=h+1;var u=i(c),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var g=n(p,r);r.byIndex=a,t.splice(a,0,{identifier:c,updater:g,references:1})}o.push(c)}return o}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var s=r(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=i(s[o]);t[a].references--}for(var l=r(e,n),d=0;d<s.length;d++){var h=i(s[d]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}s=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",r=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),r&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),r&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,r,n,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var h=[].concat(e[d]);r&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},354:e=>{e.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(n," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},365:(e,t,i)=>{i.d(t,{A:()=>a});var r=i(354),n=i.n(r),s=i(314),o=i.n(s)()(n());o.push([e.id,":root{\n  --grid-size: 75px;\n  --row-and-width: 8;\n  --ship-section-size: 73px;\n}\n  \n* {\n  font-family: sans-serif;\n  margin: 0;\n  padding: 0;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n\n.menu{\n  margin-top: 5rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 4rem;\n}\n\n.menu button, .lock-button{\n  padding: 0.5rem 1rem;\n  font-size: 1.5rem;\n  margin-left: 2rem;\n}\n\n.menu button:hover, .lock-button{\n  cursor: pointer;\n}\n\n.menu h1{\n  font-size: 8rem;\n}\n\n.menu h2{\n  font-size: 4rem;\n}\n\n.player-container{\n  margin: 2rem;\n  display: flex;\n  position: relative;\n}\n\n\n.cell-container {\n  width: fit-content;\n  border: 1px solid black;\n  display: grid;\n  grid-template-rows: repeat(var(--row-and-width), var(--grid-size));\n  grid-template-columns: repeat(var(--row-and-width), var(--grid-size));\n  z-index: 2;\n}\n\n.cell-container-atk-mode{\n  margin-left: 5rem;\n}\n\n.cell {\n  border: 1px solid black;\n  text-align: center;\n  font-size: 2.5rem;\n}\n\n.ship-container{\n  width: calc(var(--ship-section-size) * 5);\n  background-color: aqua;\n  z-index: 0;\n}\n\n.ship {\n  position: absolute;\n  border: 1px solid black;\n  display: flex;\n  z-index: 1;\n}\n\n.ship-section {\n  width:  var(--ship-section-size);\n  height: var(--ship-section-size);\n  border: 1px solid blue;\n  background-color: greenyellow;\n}\n\n.ship-section:hover {\n  cursor: grab;\n}\n\n.hidden{\n  opacity: 1;\n}\n\nmain ul, #guide{\n  font-size: 1.2rem;\n  margin-left: 3rem;\n}\n\n#guide{\n\n  margin-left: 2rem;\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\n","",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,yBAAyB;AAC3B;;AAEA;EACE,uBAAuB;EACvB,SAAS;EACT,UAAU;EACV,iBAAiB;EACjB,uBAAuB;AACzB;;AAEA;EACE,gBAAgB;EAChB,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,SAAS;EACT,mBAAmB;AACrB;;AAEA;EACE,oBAAoB;EACpB,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,kBAAkB;AACpB;;;AAGA;EACE,kBAAkB;EAClB,uBAAuB;EACvB,aAAa;EACb,kEAAkE;EAClE,qEAAqE;EACrE,UAAU;AACZ;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,uBAAuB;EACvB,kBAAkB;EAClB,iBAAiB;AACnB;;AAEA;EACE,yCAAyC;EACzC,sBAAsB;EACtB,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,uBAAuB;EACvB,aAAa;EACb,UAAU;AACZ;;AAEA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,sBAAsB;EACtB,6BAA6B;AAC/B;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;;EAEE,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;AACnB",sourcesContent:[":root{\n  --grid-size: 75px;\n  --row-and-width: 8;\n  --ship-section-size: 73px;\n}\n  \n* {\n  font-family: sans-serif;\n  margin: 0;\n  padding: 0;\n  user-select: none;\n  -webkit-user-drag: none;\n}\n\n.menu{\n  margin-top: 5rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 4rem;\n}\n\n.menu button, .lock-button{\n  padding: 0.5rem 1rem;\n  font-size: 1.5rem;\n  margin-left: 2rem;\n}\n\n.menu button:hover, .lock-button{\n  cursor: pointer;\n}\n\n.menu h1{\n  font-size: 8rem;\n}\n\n.menu h2{\n  font-size: 4rem;\n}\n\n.player-container{\n  margin: 2rem;\n  display: flex;\n  position: relative;\n}\n\n\n.cell-container {\n  width: fit-content;\n  border: 1px solid black;\n  display: grid;\n  grid-template-rows: repeat(var(--row-and-width), var(--grid-size));\n  grid-template-columns: repeat(var(--row-and-width), var(--grid-size));\n  z-index: 2;\n}\n\n.cell-container-atk-mode{\n  margin-left: 5rem;\n}\n\n.cell {\n  border: 1px solid black;\n  text-align: center;\n  font-size: 2.5rem;\n}\n\n.ship-container{\n  width: calc(var(--ship-section-size) * 5);\n  background-color: aqua;\n  z-index: 0;\n}\n\n.ship {\n  position: absolute;\n  border: 1px solid black;\n  display: flex;\n  z-index: 1;\n}\n\n.ship-section {\n  width:  var(--ship-section-size);\n  height: var(--ship-section-size);\n  border: 1px solid blue;\n  background-color: greenyellow;\n}\n\n.ship-section:hover {\n  cursor: grab;\n}\n\n.hidden{\n  opacity: 1;\n}\n\nmain ul, #guide{\n  font-size: 1.2rem;\n  margin-left: 3rem;\n}\n\n#guide{\n\n  margin-left: 2rem;\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\n"],sourceRoot:""}]);const a=o},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},659:e=>{var t={};e.exports=function(e,i){var r=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0;var r=i(72),n=i.n(r),s=i(825),o=i.n(s),a=i(659),l=i.n(a),d=i(56),h=i.n(d),c=i(540),u=i.n(c),p=i(113),g=i.n(p),m=i(365),A={};A.styleTagTransform=g(),A.setAttributes=h(),A.insert=l().bind(null,"head"),A.domAPI=o(),A.insertStyleElement=u(),n()(m.A,A),m.A&&m.A.locals&&m.A.locals;class f{GRID_SIZE=8;INVALID_ATTACK=0;constructor(e,t,i,r){this.ID=e,this.isGameOver=i,this.gameRequest=r,this.cellContainer=document.createElement("div"),this.cellContainer.classList.add("cell-container"),this.createCells(),this.parentNode=t}createCells(){for(let e=0;e<this.GRID_SIZE;e++)for(let t=0;t<this.GRID_SIZE;t++){const i=document.createElement("div");i.classList.add("cell"),this.bindEventListenerToGridCell(i,e,t),this.cellContainer.appendChild(i)}}bindEventListenerToGridCell(e,t,i){e.addEventListener("click",(e=>{console.log(`i: ${t}, j: ${i}`);const r=this.gameRequest(this.ID,"gameUtils","receiveAttack",[t,i]);r!==this.INVALID_ATTACK&&(e.target.textContent=this.decodeAttackStatus(r),this.isGameOver())}))}decodeAttackStatus(e){return 1===e?"X":2===e?".":void 0}renderGrid(){this.parentNode.appendChild(this.cellContainer),this.enablePtrEvents()}unrenderGrid(){this.parentNode.removeChild(this.cellContainer)}disablePtrEvents(){this.cellContainer.style.pointerEvents="none"}enablePtrEvents(){this.cellContainer.style.pointerEvents="auto"}}class S{#e=0;#t=0;#i=!1;#r=0;#n=0;#s=0;#o=0;#a=0;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.#e=e,this.horizontal=t,this.#r=0,this.#n=Math.trunc(this.#e/2),this.#s=this.#e-1,this.#o=this.#r+this.#n,this.#a=this.#s-this.#n}hit=function(){this.#t+=1};isDestroyed=function(){if(this.#e===this.#t)return!0};rotate(){this.horizontal=!this.horizontal}getLength=function(){return this.#e};getStartOffSet=function(){return this.#o};getEndOffSet=function(){return this.#a};getOrientation(){return this.horizontal}}class v{#l=8;#d=-4;#h=-3;#c=-2;#u=-1;#p=7;#g=[];#m=[];#A=[];#f=null;#S=null;#v=!1;#C=[[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2],[-2,-2,-2,-2,-2,-2,-2,-2]];placeShip(e,t,i){if(this.#A.includes(e))return void console.log("Invalid Request");const r=this.getShip(e);return this.#f=this.copyOriginalGrid(),!!this.isDesiredPositionValid(r,t,i,this.#f)&&(this.placeShipHelper(r,e,this.#f,t,i),this.refreshGameBoard(this.#f),!0)}movePlacedShip(e,t,i){if(null===this.getGridWhereTheSelectedShipIsRemoved)return console.log("Invalid Request"),!1;this.#f=this.copyGridWhereTheSelectedShipIsRemoved();const r=this.getShip(e);return this.isDesiredPositionValid(r,t,i,this.#f)?(this.placeShipHelper(r,e,this.#f,t,i),this.refreshGameBoard(this.#f),!0):(this.#f=null,!1)}removeShip(e,t,i){const r=this.getPositionData(t,i);if(null===r)return void console.log("Invalid Request");if(r.shipNumber!==e&&0!==r.distanceFromMiddlePoint)return void console.log("Invalid Request");const n=this.getShip(e),s=n.horizontal?i:t,o=s-n.getStartOffSet(),a=s+n.getEndOffSet();let l=o;if(this.#S=this.copyOriginalGrid(),n.horizontal)for(;l<=a;l++)this.#S[t][l]=this.#c;else for(;l<=a;l++)this.#S[l][i]=this.#c;this.refreshGameBoard(this.#S)}getPositionData(e,t){const i={...this.getGrid()[e][t]},r=this.getShip(i.shipNumber);return 2!==Object.keys(i).length?null:(i.isHorizontal=r.getOrientation(),i)}rotatePlacedShip(e,t,i){if(null===this.#S)return console.log("Invalid Request"),!1;const r=this.getShip(e);r.rotate();const n=this.movePlacedShip(e,t,i);return n||r.rotate(),n}updateGrid(){null!==this.#f?(this.#C=this.#f,this.#f=null,this.#S=null,this.areAllTheShipsPlaced()||this.boardIntegrityChecker()):console.log("Invalid Request")}getGrid(){return this.#C}getTempGrid(){return this.#f}getGridWhereTheSelectedShipIsRemoved(){return this.#S}lockGrid(){return this.areAllTheShipsPlaced()?(this.#v=!0,!0):(console.log(this.#A),!1)}initGameBoard(){this.resetGameBoard(),this.getShips()}placeShipHelper(e,t,i,r,n){const s=e.horizontal?n:r,o=s-e.getStartOffSet(),a=s+e.getEndOffSet();let l=o,d=Math.trunc(e.getLength()/2);if(e.horizontal)for(;l<=a;l++)i[r][l]={shipNumber:t,distanceFromMiddlePoint:d},d--;else for(;l<=a;l++)i[l][n]={shipNumber:t,distanceFromMiddlePoint:d},d-=1}resetGameBoard(){for(let e=0;e<this.#l;e++)for(let t=0;t<this.#l;t++)this.#C[e][t]=this.#c}copyOriginalGrid(){return this.#C.map((e=>e.slice()))}copyGridWhereTheSelectedShipIsRemoved(){return this.#S.map((e=>e.slice()))}getDestroyedShips(){return this.#g}getShip(e){return this.#m[e]}getShips(){const e=[1,1,2,2,3,3,4];for(let t=0;t<this.#p;t++)this.#m.push(new S(e[t]))}refreshGameBoard(e){for(let t=0;t<this.#l;t++)for(let i=0;i<this.#l;i++)"object"!=typeof e[t][i]&&(this.isThereAShipInCellPerimeter(t,i,e)?e[t][i]=this.#u:e[t][i]=this.#c)}isThereAShipInCellPerimeter(e,t,i){for(let r=-1;r<=1;r++){const n=e-r;if(this.isDesiredPositionNotOutOfBounds(n,t))for(let e=-1;e<=1;e++){const r=t-e;if(this.isDesiredPositionNotOutOfBounds(n,r)&&"object"==typeof i[n][r])return!0}}return!1}boardIntegrityChecker(){const e=this.getGrid();for(let t=0;t<this.#l;t++)for(let i=0;i<this.#l;i++){const r=e[t][i];"object"==typeof r&&(this.#A.includes(r.shipNumber)||this.#A.push(r.shipNumber))}}areAllTheShipsPlaced(){return this.#A.length===this.#p}getDestroyedShipsCount(){return this.#g.length}isDesiredPositionValid(e,t,i,r){return!!(this.isDesiredPositionNotOutOfBounds(t,i)&&this.isDesiredPositionAvailable(t,i,r)&&this.doesTheShipFitInTheDesiredPosition(e,t,i)&&this.areThereShipCollisions(e,t,i,r))}isDesiredPositionNotOutOfBounds=function(e,t){return!(e>=this.#l||t>=this.#l||e<0||t<0)};isDesiredPositionAvailable=function(e,t,i){return i[e][t]==this.#c};doesTheShipFitInTheDesiredPosition=function(e,t,i){const r=e.horizontal?i:t;return!(r-e.getStartOffSet()<0||r+e.getEndOffSet()>=this.#l)};areThereShipCollisions=function(e,t,i,r){const n=e.horizontal?i:t,s=n-e.getStartOffSet(),o=n+e.getEndOffSet();let a=s;if(e.horizontal){for(;a<=o;a++)if(r[t][a]!=this.#c)return!1}else for(;a<=o;a++)if(r[a][i]!=this.#c)return!1;return!0};receiveAttack(e,t){const i=this.#C[e][t];if("object"==typeof i){const r=this.getShip(i.shipNumber);return r.hit(),r.isDestroyed()&&(console.log("from receive attack"),this.#g.push(i.shipNumber)),this.#C[e][t]=this.#d,1}return i===this.#u||i===this.#c?(this.#C[e][t]=this.#h,2):0}}class C{#E=null;constructor(){this.#E=new v,this.#E.initGameBoard()}getGameBoard(){return this.#E}}const E={currentUser:0,dragAndDropController:{draggables:[],unplacedShipGettingDragged:!1,placedShipGettingDragged:!1,shipNumber:null,distanceFromMiddlePoint:null,startX:null,startY:null,iPosition:null,jPosition:null,outsideGrid:!1,isHorizontal:!0,getShip:function(){if(null!==this.shipNumber)return this.draggables[this.shipNumber]}},main:document.querySelector("main"),lockButton:document.createElement("button"),vsp2Button:document.querySelector("#vsp2"),game:new class{#I=!1;#y=null;#D=!0;#G=0;#b=0;#B=7;constructor(){this.#y=[new C,new C]}start(){this.#I?console.log("Invalid Request"):this.#I=!0}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.#I)return;if(null===e)return;if(e.user!==this.#G)return;const t=this.#y[e.user].getGameBoard();switch(e.type){case"placementUtils":return this.#D?this.placementUtils(t,e.request,e.parameters):void console.log("Invalid Request");case"renderUtils":return this.renderUtils(t,e.request);case"gameUtils":return!this.#D&&this.gameUtils(t,e.request,e.parameters);default:return void console.log("Request Type Invalid")}}placementUtils(e,t,i){switch(t){case"lockGrid":return!!e.lockGrid()&&(1===this.#G?(this.#D=!1,this.#G=0,!0):(this.#G=1,console.log(this.#G),console.log(this.#D),!0));case"placeShip":return!e.areAllTheShipsPlaced()&&e.placeShip(...i);case"movePlacedShip":return e.movePlacedShip(...i);case"removeShip":return e.removeShip(...i);case"getPositionData":return e.getPositionData(...i);case"rotatePlacedShip":return e.rotatePlacedShip(...i);case"updateGrid":return e.updateGrid(...i);case"test":return e.test(...i)}}renderUtils(e,t){switch(t){case"getGrid":return e.getGrid();case"getTempGrid":return e.getTempGrid();case"getGridWhereTheSelectedShipIsRemoved":return e.getGridWhereTheSelectedShipIsRemoved()}}gameUtils(e,t,i){const r=this.#y[1-this.#G].getGameBoard();switch(t){case"receiveAttack":console.log(`Caller ${this.#G}`),console.log("Receiver: "+(1-this.#G)),console.log("Receiver Grid State BA"),console.table(r.getGrid());const e=r.receiveAttack(...i);return e>0&&(this.#G=1-this.#G,console.log(`current player after successful attack: ${this.#G}`)),console.log(`Attack Status: ${e}`),console.log("Receiver Grid State AA"),console.table(r.getGrid()),console.log(`Receiver Destroyed Ships: ${r.getDestroyedShips()}`),e;case"isGameOver":const t=this.#y[0].getGameBoard(),n=this.#y[1].getGameBoard();return console.log(`P1 Destroyed Ships Count; ${t.getDestroyedShipsCount()}`),console.log(`P2 Destroyed Ships Count; ${n.getDestroyedShipsCount()}`),t.getDestroyedShipsCount()===this.#B?1:n.getDestroyedShipsCount()===this.#B?0:-1}}},gridUI:null,playerAttackGrid:null};function I(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return E.game.request({user:e,type:t,request:i,parameters:r})}function y(){let e=E.playerAttackGrid[E.currentUser];e.disablePtrEvents(),E.currentUser=1-E.currentUser;const t=I(E.currentUser,"gameUtils","isGameOver");switch(console.log(`Game Status: ${t}`),t){case 0:return void alert("Player 1 Wins");case 1:return void alert("Player 2 Wins");default:console.log("round continues")}setTimeout((()=>{e.unrenderGrid(),E.playerAttackGrid[E.currentUser].renderGrid()}),2e3)}E.gridUI=new class{cell2dArray=[];GRID_SIZE=8;SHIP_SIZES=[1,1,2,2,3,3,4];MAX_SHIPS=7;cellHandlerReferences=[];shipSectionNodes=[];shipSectionHandlerReferences=[];constructor(e,t,i){this.dragData=t,this.gameRequest=i,this.currentUser=0,this.playerContainer=document.createElement("div"),this.cellContainer=document.createElement("div"),this.shipContainer=document.createElement("div"),this.playerContainer.classList.add("player-container"),this.cellContainer.classList.add("cell-container"),this.shipContainer.classList.add("ship-container"),this.createCells(),this.createShips(),this.playerContainer.appendChild(this.shipContainer),this.playerContainer.appendChild(this.cellContainer),this.parentNode=e,this.parentNode.appendChild(this.playerContainer)}removeShipsAndContainer(){this.parentNode.removeChild(this.playerContainer)}detachAllListeners(){for(let e=0;e<this.GRID_SIZE;e++)for(let t=0;t<this.GRID_SIZE;t++){const i=this.cell2dArray[e][t],r=this.cellHandlerReferences[e][t];i.removeEventListener("mouseenter",r[0]),i.removeEventListener("mouseout",r[1]),i.removeEventListener("mouseup",r[2]),i.removeEventListener("mousedown",r[3])}for(let e=0;e<this.shipSectionNodes.length;e++){const t=this.shipSectionNodes[e];console.log(t);const i=this.shipSectionHandlerReferences[e];t.removeEventListener("mousedown",i)}}createCells(){for(let e=0;e<this.GRID_SIZE;e++){const t=[],i=[];for(let r=0;r<this.GRID_SIZE;r++){const n=document.createElement("div");t.push(n),n.classList.add("cell");const s=this.bindEventListenerToGridCell(n,e,r);i.push(s),this.cellContainer.appendChild(n)}this.cell2dArray.push(t),this.cellHandlerReferences.push(i)}}bindEventListenerToGridCell(e,t,i){let r=!1;const n=()=>{if(this.dragData.unplacedShipGettingDragged){this.dragData.getShip().style.visibility="hidden";const e=[this.dragData.shipNumber,t,i+this.dragData.distanceFromMiddlePoint];if(r=this.gameRequest(this.currentUser,"placementUtils","placeShip",e),r){const e=this.gameRequest(this.currentUser,"renderUtils","getTempGrid");this.renderGrid(e)}else{const e=this.gameRequest(this.currentUser,"renderUtils","getGrid");this.renderGrid(e)}}else if(this.dragData.placedShipGettingDragged){if(console.log("placed"),this.dragData.outsideGrid=!1,this.dragData.isHorizontal){const e=[this.dragData.shipNumber,t,i+this.dragData.distanceFromMiddlePoint];r=this.gameRequest(this.currentUser,"placementUtils","movePlacedShip",e)}else{const e=[this.dragData.shipNumber,t+this.dragData.distanceFromMiddlePoint,i];r=this.gameRequest(this.currentUser,"placementUtils","movePlacedShip",e)}if(r){const e=this.gameRequest(this.currentUser,"renderUtils","getTempGrid");this.renderGrid(e)}else{const e=this.gameRequest(this.currentUser,"renderUtils","getGridWhereTheSelectedShipIsRemoved");this.renderGrid(e)}}},s=()=>{if(r=!1,this.dragData.unplacedShipGettingDragged){this.dragData.getShip().style.visibility="visible";const e=this.gameRequest(this.currentUser,"renderUtils","getGrid");this.renderGrid(e)}else if(this.dragData.placedShipGettingDragged){this.dragData.outsideGrid=!0;const e=this.gameRequest(this.currentUser,"renderUtils","getGridWhereTheSelectedShipIsRemoved");this.renderGrid(e)}},o=()=>{if(this.dragData.placedShipGettingDragged&&t===this.dragData.iPosition&&i===this.dragData.jPosition){let e;if(console.log("trigger rotation"),this.dragData.isHorizontal){const r=[this.dragData.shipNumber,t,i+this.dragData.distanceFromMiddlePoint];e=this.gameRequest(this.currentUser,"placementUtils","rotatePlacedShip",r)}else{const r=[this.dragData.shipNumber,t+this.dragData.distanceFromMiddlePoint,i];e=this.gameRequest(this.currentUser,"placementUtils","rotatePlacedShip",r)}if(console.log(`Rotation Sucessful : ${e}`),e){const e=this.gameRequest(this.currentUser,"renderUtils","getTempGrid");this.renderGrid(e),this.gameRequest(this.currentUser,"placementUtils","updateGrid")}}else if(r){if(this.dragData.unplacedShipGettingDragged||this.dragData.placedShipGettingDragged)return this.gameRequest(this.currentUser,"placementUtils","updateGrid"),void(r=!1)}else{const e=this.gameRequest(this.currentUser,"renderUtils","getGrid");this.renderGrid(e)}},a=()=>{const e=this.gameRequest(this.currentUser,"placementUtils","getPositionData",[t,i]);if(null!==e)if(this.dragData.placedShipGettingDragged=!0,this.dragData.shipNumber=e.shipNumber,this.dragData.distanceFromMiddlePoint=e.distanceFromMiddlePoint,this.dragData.isHorizontal=e.isHorizontal,this.dragData.iPosition=t,this.dragData.jPosition=i,this.dragData.isHorizontal=e.isHorizontal,e.isHorizontal){const e=[this.dragData.shipNumber,t,i+this.dragData.distanceFromMiddlePoint];this.gameRequest(this.currentUser,"placementUtils","removeShip",e)}else{const e=[this.dragData.shipNumber,t+this.dragData.distanceFromMiddlePoint,i];this.gameRequest(this.currentUser,"placementUtils","removeShip",e)}};return e.addEventListener("mouseenter",n),e.addEventListener("mouseout",s),e.addEventListener("mouseup",o),e.addEventListener("mousedown",a),[n,s,o,a]}createShips(){let e=10;for(let t=0;t<this.MAX_SHIPS;t++){const i=t,r=this.SHIP_SIZES[t],n=document.createElement("div");n.classList.add("ship");let s=Math.trunc(r/2);for(let e=0;e<r;e++){const e=document.createElement("div");e.classList.add("ship-section"),this.shipSectionNodes.push(e),this.bindEventListenerToShipSection(i,e,s),s-=1,n.appendChild(e)}n.style.top=`${e}px`,n.style.left="30px",e+=85,this.playerContainer.appendChild(n),this.dragData.draggables.push(n)}}bindEventListenerToShipSection(e,t,i){const r=t=>{this.dragData.unplacedShipGettingDragged=!0,this.dragData.distanceFromMiddlePoint=i,this.dragData.shipNumber=e,this.dragData.startX=t.clientX,this.dragData.startY=t.clientY};t.addEventListener("mousedown",r),this.shipSectionHandlerReferences.push(r)}renderGrid(e){for(let t=0;t<8;t++)for(let i=0;i<8;i++){const r=this.encodeToColor(e[t][i]);this.cell2dArray[t][i].style.background=r}}clearGrid(){const e=this.gameRequest(this.currentUser,"renderUtils","getGrid");this.renderGrid(e)}restoreShipPositions(){let e=15;this.dragData.draggables.forEach((t=>{t.style.visibility="visible",t.style.top=`${e}px`,t.style.left="30px",e+=85}))}updateCurrentUser(){this.currentUser=1}droppedOutsideGrid(){const e=this.gameRequest(this.currentUser,"renderUtils","getGrid");this.renderGrid(e)}encodeToColor(e){return"object"==typeof e?"green":-1===e?"red":"white"}}(E.main,E.dragAndDropController,I),E.playerAttackGrid=[new f(0,E.main,y,I),new f(1,E.main,y,I)],document.addEventListener("mousemove",(e=>{if(!E.dragAndDropController.unplacedShipGettingDragged)return;const t=E.dragAndDropController.getShip();let i=E.dragAndDropController.startX-e.clientX,r=E.dragAndDropController.startY-e.clientY;E.dragAndDropController.startX=e.clientX,E.dragAndDropController.startY=e.clientY,t.style.left=t.offsetLeft-i+"px",t.style.top=t.offsetTop-r+"px"})),document.addEventListener("mouseup",(()=>{E.dragAndDropController.placedShipGettingDragged&&E.dragAndDropController.outsideGrid&&E.gridUI.droppedOutsideGrid(),E.dragAndDropController.unplacedShipGettingDragged=!1,E.dragAndDropController.placedShipGettingDragged=!1,E.dragAndDropController.shipNumber=null,E.dragAndDropController.startX=null,E.dragAndDropController.startY=null,E.dragAndDropController.isHorizontal=!0})),E.lockButton.addEventListener("click",(e=>{const t=I(E.currentUser,"placementUtils","lockGrid");return 0===E.currentUser&&t?(E.currentUser=1,console.log("lock successful"),E.gridUI.updateCurrentUser(),E.gridUI.clearGrid(),void E.gridUI.restoreShipPositions()):1===E.currentUser&&t?(E.gridUI.detachAllListeners(),E.gridUI.removeShipsAndContainer(),e.target.parentNode.removeChild(e.target),E.currentUser=0,console.log("placement done"),void E.playerAttackGrid[E.currentUser].renderGrid()):void console.log("lock failed")})),E.lockButton.textContent="Lock in",E.lockButton.classList.add("lock-button"),E.game.start(),E.main.appendChild(E.lockButton)})();
//# sourceMappingURL=main.bundle.js.map